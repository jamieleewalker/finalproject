package music.service;

import org.springframework.beans.factory.annotation.Autowired;

import music.controller.model.SongData;
import music.dao.SongDao;
import music.entity.Song;

@Service
public class MusicService {
	@Autowired
	private SongDao songDao;
	
	@Transactional(readOnly = false)
	public SongData saveSong(SongData songData) {
		Song song = songData.toSong();
		Song dbSong = songDao.save(song);
		
		return new SongData(dbSong);
		}
	
	@Transactional(readOnly = true)
	public SongData retrieveLocationById(Long songId) {
		Song song = findSongById(songId);
		return new SongData(song);
	}
	
	private Song findSongById(Long songId) {
		return songDao.findById(songId).orelseThrow(() 
				-> new NoSuchElementException("song with ID=" + songId + " was not found"));
	}
}
